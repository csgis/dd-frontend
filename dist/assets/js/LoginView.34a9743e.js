(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LoginView"],{"0291":function(e,t,r){"use strict";var n=r("268a"),o=r.n(n);o.a},"268a":function(e,t,r){},"3bea":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("MhRouterView",{staticClass:"LoginView view hSpace hSpace--app",attrs:{isContentReady:e.isContentReady}},[r("div",{staticClass:"LoginView__inner view__inner"},[r("div",{staticClass:"LoginView__form"},[r("KnFormHeaderRow",{attrs:{title:"Login"}}),r("KnFormFieldRow",[r("div",{staticClass:"richText",staticStyle:{"grid-column":"span 12"}},[r("p",[e._v(" Before you can add a new record it's needed to login with your GeoServer Account at "),r("a",{attrs:{href:"https://geoserver.dainst.org/"}},[e._v("https://geoserver.dainst.org/")])]),r("p",[e._v(" If you do not have an account yet please follow the link to register. ")])])]),r("KnFormFieldRow",[r("div",{staticStyle:{"grid-column":"span 12",display:"flex","justify-content":"flex-end"}},[r("div",[r("br"),r("BaseButton",{staticClass:"font font--sizeLarge font--bold",attrs:{tag:"a",href:e.registerUrl,isOutlined:!0,isDisabled:!1}},[r("template",{slot:"before"}),r("template",{slot:"default"},[e._v("Register")])],2),r("BaseButton",{staticClass:"font font--sizeLarge font--bold",attrs:{tag:"a",href:e.loginUrl,isOutlined:!1,isDisabled:!1}},[r("template",{slot:"before"}),r("template",{slot:"default"},[e._v("Login")]),r("template",{slot:"after"},[r("MhIcon",{attrs:{type:"arrow-right"}})],1)],2),r("br"),r("br")],1)])])],1)])])},o=[],i=(r("5e50"),r("2f62")),s=r("33a5"),a=r("3036"),c=r("d54a"),u=r("cdd1"),l=r("7c6a"),d=r("9b09");function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={name:"LoginView",components:{MhRouterView:a["a"],KnFormHeaderRow:c["a"],KnFormFieldRow:u["a"],BaseButton:l["a"],MhIcon:d["a"]},mixins:[s["a"]],directives:{},props:{},data:function(){return{isContentReady:!1,posts:void 0}},watch:{isReturnRequestTokenUri:{handler:function(e,t){e&&this.fetchAuthToken()},immediate:!0,deep:!0}},computed:f(f({app:function(){return this.$root.$children[0]},elmClasses:function(){var e=[];return e}},Object(i["b"])(["currentEnv","requestToken","accessToken"])),{},{locationHrefWithoutQuery:function(){var e=window.location;return e.protocol+"//"+e.host+e.pathname+e.hash},registerUrl:function(){var e=this.locationHrefWithoutQuery,t=this._.get(this.currentEnv,"registerUrl","").replace("%redirect_uri%",e);return t},loginUrl:function(){var e=this.locationHrefWithoutQuery,t=this._.get(this.currentEnv,"loginUrl","").replace("%redirect_uri%",e);return t},isReturnRequestTokenUri:function(){var e=this._.has(this.$route.query,"code",!1);return e}}),methods:{fetchAuthToken:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this.locationHrefWithoutQuery,n=window.location.search,o=new URLSearchParams(n),i=o.get("code");t&&(console.group(this.$options.name,"â€¢ fetchAuthToken()"),console.log("redirectUri:",r),console.log("queryString:",n),console.log("requestToken:",i),console.groupEnd()),this.$router.replace("/login/"),this.$store.commit("setRequestToken",i);fetch(this.currentEnv.tokenUrl,{body:new URLSearchParams({grant_type:"authorization_code",code:i,redirect_uri:r,client_id:this.currentEnv.tokenClientId}),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((function(e){return e.json()})).then((function(t){var r=e._.get(t,"access_token");console.log("fetchAuthToken:",t),r&&(e.$store.commit("setAccessToken",r),e.$router.replace("/edit/"))}))}},mounted:function(){this.isContentReady=!0}},w=g,v=(r("0291"),r("2877")),m=Object(v["a"])(w,n,o,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=LoginView.34a9743e.js.map