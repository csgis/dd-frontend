(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LoginView"],{"0291":function(e,t,o){"use strict";var r=o("268a"),n=o.n(r);n.a},"268a":function(e,t,o){},"3bea":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("MhRouterView",{staticClass:"LoginView view hSpace hSpace--app",attrs:{isContentReady:e.isContentReady}},[o("div",{staticClass:"LoginView__inner view__inner"},[o("div",{staticClass:"LoginView__form"},[o("KnFormHeaderRow",{attrs:{title:"Login"}}),o("KnFormFieldRow",[o("div",{staticClass:"richText",staticStyle:{"grid-column":"span 12"}},[o("p",[e._v(" Before you can add a new record it's needed to login with your GeoServer Account at "),o("a",{attrs:{href:"https://geoserver.dainst.org/"}},[e._v("https://geoserver.dainst.org/")])]),o("p",[e._v(" If you do not have an account yet please follow the link to register. ")])])]),o("KnFormFieldRow",[o("div",{staticStyle:{"grid-column":"span 12",display:"flex","justify-content":"flex-end"}},[o("div",[o("br"),o("BaseButton",{staticClass:"font font--sizeLarge font--bold",attrs:{tag:"a",href:e.registerUrl,isOutlined:!0,isDisabled:!1}},[o("template",{slot:"before"}),o("template",{slot:"default"},[e._v("Register")])],2),o("BaseButton",{staticClass:"font font--sizeLarge font--bold",attrs:{tag:"a",href:e.loginUrl,isOutlined:!1,isDisabled:!1}},[o("template",{slot:"before"}),o("template",{slot:"default"},[e._v("Login")]),o("template",{slot:"after"},[o("MhIcon",{attrs:{type:"arrow-right"}})],1)],2),o("br"),o("br")],1)])])],1)])])},n=[],i=(o("5e50"),o("2f62")),a=o("33a5"),s=o("3036"),c=o("d54a"),l=o("cdd1"),u=o("7c6a"),d=o("9b09");function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){f(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var g={name:"LoginView",components:{MhRouterView:s["a"],KnFormHeaderRow:c["a"],KnFormFieldRow:l["a"],BaseButton:u["a"],MhIcon:d["a"]},mixins:[a["a"]],directives:{},props:{},data:function(){return{isContentReady:!1,posts:void 0}},watch:{someVar:{handler:function(e,t){},immediate:!0,deep:!0}},computed:p(p({app:function(){return this.$root.$children[0]},elmClasses:function(){var e=[];return e}},Object(i["b"])(["currentEnv","requestToken","accessToken"])),{},{locationHrefWithoutQuery:function(){var e=window.location,t=e.protocol+"//"+e.host+e.pathname+e.hash;return t},registerUrl:function(){var e=this.locationHrefWithoutQuery.replace("#","%23");console.log("redirectUri:",e);var t=this._.get(this.currentEnv,"registerUrl","").replace("%redirect_uri%",e);return t},loginUrl:function(){var e=location.protocol+"//"+location.host,t=this._.get(this.currentEnv,"loginUrl","").replace("%redirect_uri%",e);return t}}),methods:{fetchAuthToken:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=this.locationHrefWithoutQuery,r=window.location.search,n=new URLSearchParams(r),i=n.get("code");t&&(console.group(this.$options.name,"â€¢ fetchAuthToken()"),console.log("redirectUri:",o),console.log("queryString:",r),console.log("requestToken:",i),console.groupEnd()),this.$router.replace("/login/"),this.$store.commit("setRequestToken",i);fetch(this.currentEnv.tokenUrl,{body:new URLSearchParams({grant_type:"authorization_code",code:i,redirect_uri:o,client_id:this.currentEnv.tokenClientId}),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((function(e){return e.json()})).then((function(t){var o=e._.get(t,"access_token");console.log("fetchAuthToken:",t),o&&(e.$store.commit("setAccessToken",o),e.$router.replace("/edit/"))}))}},mounted:function(){this.isContentReady=!0}},w=g,v=(o("0291"),o("2877")),m=Object(v["a"])(w,r,n,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=LoginView.a413c062.js.map